# ==============================================
#  Azure DevOps Pipeline - Proyecto INTERESTELAR
# ==============================================
# Ejecuta 3 jobs en paralelo (Build, Test, Deploy)
# Totalmente compatible con Linux (Ubuntu)
# ==============================================

trigger:
- main

# Variables globales
variables:
  agentPoolName: 'MySelfHostedPool'  # Nombre del pool (o usa ubuntu-latest)
  agentProject: 'INTERESTELAR'
  myToken: '$(myToken)'              # Variable secreta
  myUser: 'sebatianuribe111'
  myPassword: '$(myPassword)'        # Variable secreta

# ==============================================
#  Jobs en paralelo
# ==============================================
jobs:
- job: BuildProject
  displayName: " Compilar proyecto INTERESTELAR"
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - script: |
      echo "Iniciando compilaci贸n en agente: $(Agent.Name)"
      echo " Descargando dependencias..."
      sleep 3
      echo " Compilando c贸digo fuente..."
      sleep 3
      echo " Compilaci贸n completada exitosamente."
    displayName: "Compilaci贸n del c贸digo"

- job: RunTests
  displayName: " Ejecutar pruebas autom谩ticas"
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - script: |
      echo "Ejecutando pruebas en agente: $(Agent.Name)"
      echo "Preparando entorno de pruebas..."
      sleep 2
      echo "Corriendo pruebas unitarias..."
      sleep 3
      echo " Todas las pruebas pasaron correctamente."
    displayName: "Ejecuci贸n de pruebas"

- job: DeployApp
  displayName: " Desplegar aplicaci贸n INTERESTELAR"
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - script: |
      echo "Desplegando aplicaci贸n en agente: $(Agent.Name)"
      echo " Empaquetando artefactos..."
      sleep 2
      echo " Subiendo a servidor de despliegue simulado..."
      sleep 3
      echo " Despliegue completado correctamente."
    displayName: "Despliegue de la aplicaci贸n"
